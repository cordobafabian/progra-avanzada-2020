package monticulo;

import java.lang.reflect.Array;
import java.util.ArrayList;

public class Monticulo {
		ArrayList<Elemento> monticulo;
		
		public Monticulo() {
			this.monticulo = new ArrayList<Elemento>();
			//this.monticulo.add(new Elemento());
			this.monticulo.add(null);
		}
		
		public Monticulo(ArrayList<Elemento> monticulo) {
			this.monticulo = monticulo;
		}
		
		public Elemento sacarUnElemento() {
			ArrayList<Elemento> array = this.getMonticulo();
			Elemento resultado;
			
			if(array.size() == 1) {
				 resultado = null;
				 
			}else {
				if(array.size() == 2) {
					resultado = array.get(1).clone();
					array.remove(1);
					
				}
				else {
					resultado = array.get(1).clone();
					
					array.set(1, array.get(array.size()-1));
					array.remove(array.size()-1);
					
					int indexPadre = 1;
					int indexHI = indexPadre*2 >= array.size()-1 ? -1 : indexPadre*2;
					int indexHD = indexPadre*2 + 1 >= array.size()-1 ? -1 :indexPadre*2 + 1;
					
					int intercambiar=0;
					
					while(indexHD!=-1) {
						if(indexHD != -1) {
							if( (intercambiar = array.get(indexHI).compareTo(array.get(indexHD)))<0 ) {
								if(array.get(indexPadre).compareTo(array.get(indexHD))<0) {
									array.get(indexPadre).intercambiar(array.get(indexHD));
								}
							}
							else {
								if(intercambiar > 0) {
									if(array.get(indexPadre).compareTo(array.get(indexHI))<0) {
										array.get(indexPadre).intercambiar(array.get(indexHI));                      
								}
								
							}
						}
					}
					
					
					
					if(indexHI != -1) {
						if(indexHD != -1) {
							if(array.get(indexPadre).compareTo(array.get(indexHD))<0 || array.get(indexPadre).compareTo(array.get(indexHI))<0) {
								if( array.get(indexHI).compareTo(array.get(indexHD))<0) {
									array.get(indexPadre).intercambiar(array.get(indexHD));
								}
								else {
									array.get(indexPadre).intercambiar(array.get(indexHD));
								}
							}
						}
					}
					
				}
				
				
			}
			
			
			return resultado;
			
		}
		

		public ArrayList<Elemento> getMonticulo() {
			return monticulo;
		}

		public void setMonticulo(ArrayList<Elemento> monticulo) {
			this.monticulo = monticulo;
		}
		
		
		
	
}
